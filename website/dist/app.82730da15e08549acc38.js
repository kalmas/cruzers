webpackJsonp([0],{0:function(e,t,n){"use strict";var o=n(1),r=n(3),i=n(23);r.enableProdMode(),o.platformBrowserDynamic().bootstrapModule(i.AppModule)},23:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(21),s=n(24),c=n(25),l=n(30),u=n(33),p=n(40),f=n(74),d=function(){function e(){}return e=o([i.NgModule({imports:[a.BrowserModule,s.HttpModule,f.routing],declarations:[c.AppComponent,l.AboutComponent,u.HomeComponent,p.SongComponent],providers:[a.Title],bootstrap:[c.AppComponent]}),r("design:paramtypes",[])],e)}();t.AppModule=d},25:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3);n(26);var a=function(){function e(){}return e=o([i.Component({selector:"my-app",template:"<router-outlet></router-outlet>"}),r("design:paramtypes",[])],e)}();t.AppComponent=a},26:353,30:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=function(){function e(){}return e=o([i.Component({template:n(31),styles:[n(32)]}),r("design:paramtypes",[])],e)}();t.AboutComponent=a},31:function(e,t){e.exports='<header>\n    <nav>\n        <div class="nav-wrapper purple lighten-1">\n        <a [routerLink]="[\'/\']" id="brand" class="brand-logo right">Cruzers Forever</a>\n            <ul id="nav-mobile" class="left">\n                <li>\n                    <a [routerLink]="[\'/\']">\n                        <i class="material-icons">keyboard_arrow_left</i>\n                    </a>\n                </li>\n                <li class="active">\n                    <a [routerLink]="[\'/about\']">\n                        <i class="material-icons">info</i>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </nav>\n</header>\n\n<main>\n    <div id="content" class="section no-pad-bot">\n        <div class="container">\n            <div class="title">What is this?</div>\n\n            <p>This is a website to help you relive the magic of Cruzers Seamans Club. Cruzers was a dive karaoke bar, it used to be <a href="https://www.google.com/maps/place/601+Orapax+St,+Norfolk,+VA+23507/@36.865136,-76.3120065">here</a>, but it\'s gone now.</p>\n\n            <p>Song data was pulled from <a href="https://github.com/kalmas/cruzers/tree/master/songbook/scans">these scans</a> of the notoriously dificult to navigate song book. Some of the song data is still mangled from the import process (sorry not sorry).</p>\n\n            <p>This site is dedicated to the memory of the best bar in Norfolk. The building is something new now, but to some it will be Cruzers forever.</p>\n\n            <p>Website is by Kyle (<a href="http://kalmas.net/">kalmas.net</a>). Source available at <a href="https://github.com/kalmas/cruzers">https://github.com/kalmas/cruzers</a>.</p>\n\n            <p>Art is by Greg (<a href="https://www.facebook.com/harringtoncomics">Harrington Comics</a>).</p>\n        </div>\n    </div>\n</main>'},32:function(e,t){e.exports=".title {\n    font-size: xx-large;\n}"},33:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(34),s=n(35),c=n(36),l=n(5),u=n(4),p=function(){function e(e,t){var n=this;this.songService=e,this.storageService=t,this.query="",this.spinnerOn=!1,this.queryStream=new u.Subject,this.songService=e,this.queryStream.distinctUntilChanged().debounceTime(500).switchMap(function(e){return n.spinnerOn=!0,n.query=e,""==e?l.Observable.of([]):n.songService.suggestSongs(e,10)}).subscribe(function(e){n.songs=e,n.spinnerOn=!1})}return e.prototype.ngOnInit=function(){this.lastQuery=this.storageService.get("query"),this.songs=this.storageService.get("songs")},e.prototype.ngOnDestroy=function(){this.storageService.set("query",this.query),this.storageService.set("songs",this.songs)},e.prototype.search=function(e){this.queryStream.next(e)},e.prototype.onSubmit=function(e){e.preventDefault()},e.prototype.focus=function(e){e.focus()},e=o([i.Component({template:n(37),styles:[n(39)],providers:[a.SongService,s.MemoryStorageService,c.LocalStorageService]}),r("design:paramtypes",[a.SongService,s.MemoryStorageService])],e)}();t.HomeComponent=p},34:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(24),s=n(5),c=n(35),l=n(36),u=function(){function e(e,t,n){this.http=e,this.memoryStorage=t,this.localStorage=n,this.host="http://cruzersforever.com/api",this.cache=new Array}return e.prototype.suggestSongs=function(e,t){var n=new a.URLSearchParams;return n.set("query",e),n.set("count",t.toString()),this.http.get(this.host+"/songs/suggest",{search:n}).map(this.extractData)["catch"](this.handleError)},e.prototype.getFromServer=function(e){return this.http.get(this.host+"/songs/"+e).map(function(e){return e.json()})["catch"](this.handleError)},e.prototype.getById=function(e){var t=this,n=this.getFromLocal(e);if(n)return s.Observable.of(n);n=this.getFromRecentSuggestions(e);var o;return o=n?s.Observable.of(n):this.getFromServer(e),o.subscribe(function(n){return t.saveToLocal(e,n)}),o},e.prototype.getFromLocal=function(e){return this.localStorage.get("song."+e)},e.prototype.saveToLocal=function(e,t){this.localStorage.set("song."+e,t)},e.prototype.getFromRecentSuggestions=function(e){var t=this.memoryStorage.get("songs");return t?t.find(function(t){return t.id==e}):null},e.prototype.extractData=function(e){var t=e.json(),n=t.content||[];return n},e.prototype.handleError=function(e){var t=e.message?e.message:e.status?e.status+" - "+e.statusText:"Server error";return console.error(t),s.Observable["throw"](t)},e=o([i.Injectable(),r("design:paramtypes",[a.Http,c.MemoryStorageService,l.LocalStorageService])],e)}();t.SongService=u},35:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=function(){function e(){this.storageNamespace="_STORAGE_SERVICE",void 0==window[this.storageNamespace]&&(window[this.storageNamespace]=new Object),this.storage=window[this.storageNamespace]}return e.prototype.set=function(e,t){this.storage[e]=JSON.stringify(t)},e.prototype.get=function(e){var t=this.storage[e];return null==t?null:JSON.parse(t)},e=o([i.Injectable(),r("design:paramtypes",[])],e)}();t.MemoryStorageService=a},36:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=function(){function e(){this.storageNamespace="_STORAGE_SERVICE"}return e.prototype.set=function(e,t){window.localStorage.setItem(this.storageNamespace+"."+e,JSON.stringify(t))},e.prototype.get=function(e){var t=window.localStorage.getItem(this.storageNamespace+"."+e);return null==t?null:JSON.parse(t)},e=o([i.Injectable(),r("design:paramtypes",[])],e)}();t.LocalStorageService=a},37:function(e,t,n){e.exports='<header>\n    <nav id="header">\n        <div class="nav-wrapper purple lighten-1">\n            <form (submit)="onSubmit($event)" id="search-form">\n                <div class="input-field">\n                    <input #query (keyup)="search(query.value)" id="search" type="search" autocomplete="off" placeholder="Search for a song..." [value]="lastQuery" >\n                    <label for="search">\n                        <i class="material-icons">search</i>\n                    </label>\n                    <i *ngIf="!spinnerOn" (click)="songs = []; query.value = \'\'" class="material-icons big-z">close</i>\n                    <div [class.active]="spinnerOn" class="preloader-wrapper small" id="spins">\n                        <div class="spinner-layer">\n                            <div class="circle-clipper right">\n                                <div class="circle"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <ul id="suggestions" class="collection dropdown-content">\n                        <a *ngFor="let song of songs" [routerLink]="[\'/songs\', song.id]"  class="collection-item suggestion">\n                            <div class="sugg-title">{{ song.title }}</div>\n                            <div class="sugg-detail">{{ song.artist }}</div>\n                            <div class="sugg-detail">{{ song.code }}</div>\n                        </a>\n                    </ul>\n                </div>\n            </form>\n        </div>\n    </nav>\n</header>\n\n<main>\n    <div id="content" (click)="focus(query)" class="section no-pad-bot">\n      <div class="container center-align">\n          <!-- <img src="http://placehold.it/500x643" id="main-image"> -->\n          <img src="'+n(38)+'" id="main-image">\n      </div>\n    </div>\n</main>\n\n<footer id="footer">\n    <a class="footer-link" [routerLink]="[\'/about\']">What is this?</a>\n</footer>\n'},38:function(e,t,n){e.exports=n.p+"assets/cruzers500.91b8310bb11e38aaa370e5badc89622b.png"},39:function(e,t){e.exports="body {\n    display: flex;\n    min-height: 100vh;\n    flex-direction: column;\n}\n\nmain {\n    flex: 1 0 auto;\n}\n\n#spins {\n    position: absolute;\n    top: 0px;\n    right: 0px;\n    margin-top: 10px;\n    margin-right: 10px;\n}\n\nfooter {\n    text-align: center;\n}\n\n.footer-link {\n     font-size: small;\n     margin-bottom: 10px;\n     width: 100%;\n}\n\n@media (max-width: 450px) {\n    #main-image {\n        width: 100%;\n    }\n}\n\n@media (min-width: 451px) {\n    #main-image {\n        width: 405px;\n    }\n}\n\n\n#suggestions {\n    margin-top: -20px;\n    display: block;\n    opacity: 1;\n    position: static;\n}\n\n#suggestions li {\n    cursor: default;\n}\n\n.sugg-title {\n    font-size: x-large;\n    color: #757575;\n    padding-bottom: 3px;\n}\n\n.sugg-detail {\n    color: #757575;\n    margin: 0px;\n    padding: 0px;\n}\n\n::-webkit-input-placeholder { /* WebKit, Blink, Edge */\n    color:    #f3e5f5;\n}\n:-moz-placeholder { /* Mozilla Firefox 4 to 18 */\n   color:    #f3e5f5;\n   opacity:  1;\n}\n::-moz-placeholder { /* Mozilla Firefox 19+ */\n   color:    #f3e5f5;\n   opacity:  1;\n}\n:-ms-input-placeholder { /* Internet Explorer 10-11 */\n   color:    #f3e5f5;\n}\n\n.big-z {\n    z-index: 100;\n}\n\n"},40:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(41),s=n(21),c=n(34),l=n(35),u=n(36),p=n(71),f=function(){function e(e,t,n,o,r,i){this.route=e,this.router=t,this.songService=n,this.videoService=o,this.sanitizer=r,this.titleService=i,this.msgs=["Let's find a video for that...","Karaoke Video Roulette™️","Here comes... something..."]}return e.prototype.ngOnInit=function(){var e=this;this.videoMsg=this.msgs[Math.floor(Math.random()*this.msgs.length)],this.sub=this.route.params.switchMap(function(t){return e.songService.getById(t.id)}).switchMap(function(t){e.song=t,e.titleService.setTitle(t.title+" - "+t.artist+" 🎤Cruzers Forever🎤");var n=e.buildVideoQuery(t.title,t.artist);return e.videoService.searchVideos(n,1)}).subscribe(function(t){if(e.video=t[0],null==e.video)e.videoError=!0;else{e.videoError=!1;var n="https://www.youtube.com/embed/"+e.video.id.videoId+"?origin=http://cruzersforever.com";e.videoUrl=e.sanitizer.bypassSecurityTrustResourceUrl(n)}},function(t){console.log(t),e.router.navigateByUrl("/")})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e.prototype.buildVideoQuery=function(e,t){var n=e+" "+t+" karaoke";return n=n.toLocaleLowerCase(),n=n.replace("null",""),n=n.replace(/[-\(\)\d\.]/g,""),n=n.replace(/\s+/g," "),n.trim()},e=o([i.Component({template:n(72),styles:[n(73)],providers:[c.SongService,l.MemoryStorageService,u.LocalStorageService,p.VideoService]}),r("design:paramtypes",[a.ActivatedRoute,a.Router,c.SongService,p.VideoService,s.DomSanitizer,s.Title])],e)}();t.SongComponent=f},71:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(3),a=n(24),s=n(5),c=function(){function e(e){this.http=e,this.url="https://www.googleapis.com/youtube/v3/search",this.key="AIzaSyATQzV1sWmT1VSiuZ0J_Fp3jh7_PwAfDHw"}return e.prototype.searchVideos=function(e,t){window.console.log("Query: "+e);var n=new a.URLSearchParams;return n.set("part","snippet"),n.set("maxResults",t.toString()),n.set("q",e),n.set("type","video"),n.set("videoEmbeddable","true"),n.set("key",this.key),this.http.get(this.url,{search:n}).map(this.extractData)["catch"](this.handleError)},e.prototype.extractData=function(e){var t=e.json(),n=t.items||[];return n},e.prototype.handleError=function(e){var t=e.message?e.message:e.status?e.status+" - "+e.statusText:"Server error";return console.error(t),s.Observable["throw"](t)},e=o([i.Injectable(),r("design:paramtypes",[a.Http])],e)}();t.VideoService=c},72:function(e,t){e.exports='<header>\n    <nav>\n        <div class="nav-wrapper purple lighten-1">\n        <a [routerLink]="[\'/\']" id="brand" class="brand-logo right">Cruzers Forever</a>\n            <ul id="nav-mobile" class="left">\n                <li>\n                    <a [routerLink]="[\'/\']">\n                        <i class="material-icons">keyboard_arrow_left</i>\n                    </a>\n                </li>\n                <li>\n                    <a [routerLink]="[\'/about\']">\n                        <i class="material-icons">info</i>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </nav>\n</header>\n\n\n<main>\n    <div id="content" class="section no-pad-bot">\n        <div *ngIf="song" class="container">\n            <div class="xxl">{{ song.title }}</div>\n            <div class="xl">{{ song.artist }}</div>\n            <div class="l mb20">{{ song.code }}</div>\n\n            <div class="b">{{ videoMsg }}</div>\n            <div *ngIf="videoUrl">\n                <iframe  id="ytplayer" type="text/html"\n                    [src]="videoUrl" frameborder="0"></iframe>\n            </div>\n\n            <div *ngIf="!videoUrl" class="mt20">\n                <div *ngIf="videoError">\n                    Sorry, couldn\'t find a video. Just sing it from memory.\n                </div>\n                <div *ngIf="!videoError" class="preloader-wrapper small active" id="spins">\n                    <div class="spinner-layer">\n                        <div class="circle-clipper right">\n                            <div class="circle"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</main>\n'},73:function(e,t){e.exports="#title {\n    font-size: xx-large;\n}\n\n#artist {\n    font-size: x-large;\n}\n\n#code {\n    font-size: x-large;\n}\n\nmain {\n    text-align: center;\n}\n\n#ytplayer {\n    width: 640px;\n    height: 390px;\n}\n\n@media (max-width: 720px) {\n    #ytplayer {\n        width: 100%;\n        height: 300px;\n    }\n}\n"},74:function(e,t,n){"use strict";var o=n(41),r=n(30),i=n(33),a=n(40),s=[{path:"",component:i.HomeComponent},{path:"about",component:r.AboutComponent},{path:"songs/:id",component:a.SongComponent}];t.appRoutingProviders=[],t.routing=o.RouterModule.forRoot(s)}});
//# sourceMappingURL=app.82730da15e08549acc38.js.map